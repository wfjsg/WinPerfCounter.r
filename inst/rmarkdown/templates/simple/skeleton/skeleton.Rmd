---
title: "SimpleSystemSummary"
author: "WataruFujishige"
date: "2017年12月31日"
output: html_document
---

```{r setup, include=FALSE}
library(WinPerfCounter)
library(ggplot2)
library(cowplot)
data <- WinPerfCounter.readcsv("tests/testthat/test.csv")
summary <- WinPerfCounter.miniSummary(data)
knitr::opts_chunk$set(echo = TRUE, fig.width=12, fig.height=8)
```

## Summary

```{r echo=FALSE, warning=FALSE, asis=TRUE}
library(knitr)
s <- max(data$Timestamp) - min(data$Timestamp)
paste("Duration: ", s, units(s))
paste("DataPoints: ", length(data))
```

## Total

```{r, echo=FALSE, warning=FALSE}
cpu <- WinPerfCounter.Metric.CPU(data)
cpu_chart <- ggplot(cpu, aes(x=Timestamp, y=value)) + ggtitle("System CPU")
cpu_chart <- cpu_chart + geom_point(aes(colour = metric)) + ylim(0.0, 100.0)

memory <- WinPerfCounter.Metric.Memory(data)
memory_chart <- ggplot(memory, aes(x = Timestamp, y=valueInGB))  + ggtitle("System Memory")
memory_chart <- memory_chart + geom_point(aes(colour = metric)) + ylim(0, 16)

plot_grid(cpu_chart, memory_chart, ncol=1, align="v")
```

## Process(Explorer)

```{r, echo=FALSE, warning=FALSE}
processName <- "explorer"
cpu <- WinPerfCounter.Process.Metric.CPU(data, processName)
cpu_chart <- ggplot(cpu, aes(x = Timestamp, y=value))
cpu_chart <- cpu_chart + ggtitle(paste("Process(", processName, ") CPU", sep = ""))
cpu_chart <- cpu_chart + geom_point(aes(colour = metric)) + ylim(0, 100.0)

memory <- WinPerfCounter.Process.Metric.Memory(data, processName)
memory_chart <- ggplot(memory, aes(x = Timestamp, y=valueInGB))
memory_chart <- memory_chart + ggtitle(paste("Process(", processName, ") Memory", sep = ""))
memory_chart <- memory_chart + geom_point(aes(colour = metric)) + ylim(0, 1)

plot_grid(cpu_chart, memory_chart, ncol=1, align="v")
```

## Process(OneDrive)

```{r, echo=FALSE, warning=FALSE}
processName <- "OneDrive"
cpu <- WinPerfCounter.Process.Metric.CPU(data, processName)
cpu_chart <- ggplot(cpu, aes(x = Timestamp, y=value))
cpu_chart <- cpu_chart + ggtitle(paste("Process(", processName, ") CPU", sep = ""))
cpu_chart <- cpu_chart + geom_point(aes(colour = metric)) + ylim(0, 100.0)

memory <- WinPerfCounter.Process.Metric.Memory(data, processName)
memory_chart <- ggplot(memory, aes(x = Timestamp, y=valueInGB))
memory_chart <- memory_chart + ggtitle(paste("Process(", processName, ") Memory", sep = ""))
memory_chart <- memory_chart + geom_point(aes(colour = metric)) + ylim(0, 1)

plot_grid(cpu_chart, memory_chart, ncol=1, align="v")
```
